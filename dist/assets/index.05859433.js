import{S as e,T as s,r as a,V as l,W as r,Y as o,o as n,X as t,a3 as u,a5 as d,a7 as m,$ as c,aa as p}from"./vendor.2b14f918.js";import{_ as i}from"./index.aa8c603d.js";const g={setup(){const{proxy:a}=c();let l=e({username:"",pwd:""});let r=s(!1);return{user:l,login:function(){l.username&&l.pwd?a.http({method:"post",path:"/login",params:l}).then((e=>{console.log(e),200==e.code?(a.$message.success("登录成功"),localStorage.setItem("token",e.token),localStorage.setItem("user",JSON.stringify(e.user)),a.$store.commit("updateUser",e.user),a.$router.push("/")):300==e.code?a.$message.error("用户名或密码错误"):a.$message.error("服务器出现异常，请稍后再试")})):a.$message.error("用户名和密码不能为空")},reg:function(){r.value?l.username&&l.pwd?a.http({method:"post",path:"/reg",params:{username:l.username,pwd:l.pwd}}).then((e=>{200==e.code?(a.$message.success("注册成功"),r.value=!1):400==e.code?a.$message.error("用户名已经存在"):300==e.code?a.$message.error("注册失败"):a.$message.error("服务器出现异常")})):a.$message.error("用户名和密码不能为空"):(r.value=!0,l.username=null,l.pwd=null)},isReg:r,tologin:function(){r.value=!1,l.username=null,l.pwd=null}}}},f={class:"login-con"},h={class:"card-header"},$={key:0},w={key:1},_=p("登录"),k=p("返回登录"),v=p("注册");var y=i(g,[["render",function(e,s,c,p,i,g){const y=a("el-input"),V=a("el-form-item"),b=a("el-button"),C=a("el-form"),R=a("el-card");return n(),l("div",f,[r(R,{class:"box-card"},{header:o((()=>[t("div",h,[p.isReg?u("",!0):(n(),l("span",$,"登录")),p.isReg?(n(),l("span",w,"注册")):u("",!0)])])),default:o((()=>[r(C,{model:p.user},{default:o((()=>[r(V,null,{default:o((()=>[r(y,{modelValue:p.user.username,"onUpdate:modelValue":s[0]||(s[0]=e=>p.user.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),r(V,null,{default:o((()=>[r(y,{modelValue:p.user.pwd,"onUpdate:modelValue":s[1]||(s[1]=e=>p.user.pwd=e),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])])),_:1}),r(V,null,{default:o((()=>[d(r(b,{type:"primary",class:"login-btn",onClick:p.login},{default:o((()=>[_])),_:1},8,["onClick"]),[[m,!p.isReg]]),d(r(b,{type:"primary",class:"login-btn",onClick:p.tologin},{default:o((()=>[k])),_:1},8,["onClick"]),[[m,p.isReg]]),r(b,{class:"regist-btn",onClick:p.reg},{default:o((()=>[v])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])}],["__scopeId","data-v-1e518820"]]);export{y as default};
