import{Q as e,R as a,T as t,S as r,U as s,r as l,V as n,X as c,W as i,a4 as u,a5 as o,a7 as d,Z as g,_ as v,a3 as h,c as m,a0 as p,a1 as y,o as k,a2 as C,$ as T}from"./vendor.2b14f918.js";import{w as I,h as f}from"./handerTime.c1674a62.js";import{_ as D}from"./index.420421d8.js";import"./popover2.1d03c9ce.js";const P={components:{webHeader:I},setup(){let l=e();a();let{proxy:n}=T();document.title="搜索";const{handlerTime1:c}=f();let i=t(1);let u=r([]),o=t(0),d=t(1),g=r([]),v=t(0),h=t(1),m=t(20);const p=(e,a)=>{let t=e.replace(/&lt;/g,"<");t=t.replace(/&gt;/g,">");let r=new RegExp("("+a+")","g");return t=t.replace(r,((e,a)=>"<span style='color:red;' class='textDeco'>"+a+"</span>")),t},y=()=>{n.http({method:"get",path:"/serach/article",params:{start:(d.value-1)*m.value,size:m.value,key:l.query.key}}).then((e=>{o.value=e.count,u.length=0,u.push(...e.data),u.forEach(((e,a,t)=>{t[a].title=p(e.title,l.query.key)}))}))},k=()=>{n.http({method:"get",path:"/serach/author",params:{start:(h.value-1)*m.value,size:m.value,key:l.query.key}}).then((e=>{v.value=e.count,g.length=0,g.push(...e.data),g.forEach(((e,a,t)=>{t[a].username=p(e.username,l.query.key)}))}))};s((()=>l.fullPath),((e,a)=>{"/serach"==l.path&&C()}));const C=()=>{d.value=1,h.value=1,y(),k()};return C(),{activeItem:i,handlerTime:c,toArticle:e=>{n.$router.push({path:"/article",query:{id:e}})},clickItem:e=>{i.value=e},articleData:u,articleTotal:o,artCurrentPage:d,userData:g,userTotal:v,userCurrentPage:h,size:m,getArticleData:y,getAuthorData:k,changeString:p,toAuthor:e=>{n.$router.push({path:"/authod",query:{id:e}})}}}},z={class:"serach"},_={class:"serach-con"},A={class:"serach-header"},x={class:"serch-body"},b={class:"serch-left"},q=["data-id","onClick"],w={class:"item-left"},H=["innerHTML"],j={key:0,class:"zw"},L={key:1,class:"img-con"},M=["src"],E=["src"],U=["src"],$=["src"],R={class:"msg"},S={key:0,class:"item-right"},Q=["src"],V={key:0},W=["onClick"],X={class:"img-con"},Z=["src"],B={class:"user-msg"},F=["innerHTML"],G={class:"fansCount"},J={key:0},K=(e=>(p("data-v-6ea1f556"),e=e(),y(),e))((()=>c("div",{class:"serch-right"},"右侧",-1)));var N=D(P,[["render",function(e,a,t,r,s,p){const y=l("web-header"),T=l("el-pagination");return k(),n("div",z,[c("div",_,[i(y),c("div",A,[c("span",{class:u({activeItem:1==r.activeItem}),onClick:a[0]||(a[0]=e=>r.clickItem(1))},"文章",2),c("span",{class:u({activeItem:2==r.activeItem}),onClick:a[1]||(a[1]=e=>r.clickItem(2))},"用户",2)]),c("div",x,[c("div",b,[o(c("div",null,[(k(!0),n(g,null,v(r.articleData,(e=>(k(),n("div",{key:e._id,class:"item","data-id":e._id,onClick:a=>r.toArticle(e._id)},[c("div",w,[c("div",{class:"title",innerHTML:e.title},null,8,H),"无封面"==e.coverType?(k(),n("div",j)):h("",!0),"四图"==e.coverType?(k(),n("div",L,[c("div",null,[c("img",{src:e.coverImg[0]},null,8,M)]),c("div",null,[c("img",{src:e.coverImg[1]},null,8,E)]),c("div",null,[c("img",{src:e.coverImg[2]},null,8,U)]),c("div",null,[c("img",{src:e.coverImg[3]},null,8,$)])])):h("",!0),c("div",R,[c("span",null,C(e.author),1),c("span",null,C(e.comment)+"条评论 ",1),c("span",null,C(r.handlerTime(e.createTime)),1)])]),"单图"==e.coverType?(k(),n("div",S,[c("img",{src:e.coverImg[0]},null,8,Q)])):h("",!0)],8,q)))),128)),0==r.articleData.length?(k(),n("div",V,"没有搜索到相关文章")):h("",!0),0!=r.articleData.length?(k(),m(T,{key:1,background:"",layout:"prev, pager, next",total:r.articleTotal,"page-size":r.size,currentPage:r.artCurrentPage,"onUpdate:currentPage":a[2]||(a[2]=e=>r.artCurrentPage=e),onCurrentChange:r.getArticleData},null,8,["total","page-size","currentPage","onCurrentChange"])):h("",!0)],512),[[d,1==r.activeItem]]),o(c("div",null,[(k(!0),n(g,null,v(r.userData,(e=>(k(),n("div",{key:e._id,class:"user",onClick:a=>r.toAuthor(e._id)},[c("div",X,[c("img",{src:e.avatar},null,8,Z)]),c("div",B,[c("span",{class:"user-username",innerHTML:e.username},null,8,F),c("span",G,C(e.fansCount)+"粉丝",1)])],8,W)))),128)),0==r.userData.length?(k(),n("div",J,"没有搜索到相关用户")):h("",!0),0!=r.userData.length?(k(),m(T,{key:1,background:"",layout:"prev, pager, next",total:r.userTotal,"page-size":r.size,currentPage:r.userCurrentPage,"onUpdate:currentPage":a[3]||(a[3]=e=>r.userCurrentPage=e),onCurrentChange:r.getAuthorData},null,8,["total","page-size","currentPage","onCurrentChange"])):h("",!0)],512),[[d,2==r.activeItem]])]),K])])])}],["__scopeId","data-v-6ea1f556"]]);export{N as default};
