import{_ as e}from"./index.420421d8.js";import{S as s,T as a,r,V as l,W as o,Y as t,o as d,X as u,a3 as n,$ as m,aa as c}from"./vendor.2b14f918.js";const p={setup(){const{proxy:e}=m();let r=s({username:"",pwd:""});let l=a(!1);return{user:r,login:function(){e.http({method:"post",path:"/login",params:r}).then((s=>{console.log(s),200==s.code?(e.$message.success("登录成功"),localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(s.user)),e.$store.commit("updateUser",s.user),e.$router.push("/")):300==s.code?e.$message.error("用户名或密码错误"):e.$message.error("服务器出现异常，请稍后再试")}))},reg:function(){l.value?r.username&&r.pwd?e.http({method:"post",path:"/reg",params:{username:r.username,pwd:r.pwd}}).then((s=>{200==s.code?(e.$message.success("注册成功"),l.value=!1):400==s.code?e.$message.error("用户名已经存在"):300==s.code?e.$message.error("注册失败"):e.$message.error("服务器出现异常")})):e.$message.error("用户名和密码不能为空"):(l.value=!0,r.username=null,r.pwd=null)},isReg:l}}},i={class:"login-con"},g={class:"card-header"},f={key:0},h={key:1},$=c("登录"),_=c("注册");var w=e(p,[["render",function(e,s,a,m,c,p){const w=r("el-input"),k=r("el-form-item"),v=r("el-button"),b=r("el-form"),V=r("el-card");return d(),l("div",i,[o(V,{class:"box-card"},{header:t((()=>[u("div",g,[m.isReg?n("",!0):(d(),l("span",f,"登录")),m.isReg?(d(),l("span",h,"注册")):n("",!0)])])),default:t((()=>[o(b,{model:m.user},{default:t((()=>[o(k,null,{default:t((()=>[o(w,{modelValue:m.user.username,"onUpdate:modelValue":s[0]||(s[0]=e=>m.user.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),o(k,null,{default:t((()=>[o(w,{modelValue:m.user.pwd,"onUpdate:modelValue":s[1]||(s[1]=e=>m.user.pwd=e),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])])),_:1}),o(k,null,{default:t((()=>[o(v,{type:"primary",class:"login-btn",onClick:m.login,disabled:m.isReg},{default:t((()=>[$])),_:1},8,["onClick","disabled"]),o(v,{class:"regist-btn",onClick:m.reg},{default:t((()=>[_])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])}],["__scopeId","data-v-2234acd5"]]);export{w as default};
