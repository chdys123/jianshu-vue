import{Q as e,R as a,T as t,S as s,r as c,o as l,V as r,X as n,a4 as o,W as i,Y as u,a5 as h,a6 as d,Z as p,_ as m,a7 as v,a3 as g,a0 as w,a1 as b,$ as D}from"./vendor.2b14f918.js";import{p as k}from"./popover2.1d03c9ce.js";import{_ as y}from"./index.420421d8.js";const f={components:{popover:k},setup(){let{proxy:c}=D(),l=e(),r=a(),n=t("/"!=l.path?8:l.query.type);""!=l.fullPath&&"/"!=l.fullPath||(n.value=0);let o=!!localStorage.user,i=o?JSON.parse(localStorage.user):null,u=t(""),h=null,d=s({article:[],authod:[]});const p=(e,a)=>{let t=e.replace(/&lt;/g,"<");t=t.replace(/&gt;/g,">");let s=new RegExp("("+a+")","g");return t=t.replace(s,((e,a)=>"<span style='color:red;' class='textDeco'>"+a+"</span>")),t},m=()=>{u.value.trim()&&r.push("/serach?key="+u.value)};return{activeItem:n,getData:e=>{n.value=Number(e),c.$router.push("/?type="+e)},isLogin:o,user:i,serachKey:u,getSerachData:()=>{if(h&&clearTimeout(h),!u.value.trim())return d.article=[],void(d.authod=[]);h=setTimeout((()=>{c.http({method:"get",path:"/serach/artAndAuth",params:{key:u.value}}).then((e=>{e.article.forEach(((e,a,t)=>{t[a].title=p(e.title,u.value)})),e.authod.forEach(((e,a,t)=>{t[a].username=p(e.username,u.value)})),d.article=e.article,d.authod=e.authod}))}),1e3)},serachData:d,toSerach:m,changeString:p,handerKeyDown:e=>{"Enter"==e.code&&u.value.trim()&&m()},signOut:()=>{console.log("点击了退出登录"),localStorage.clear(),r.push("/login")}}},created(){}},C=e=>(w("data-v-70d44913"),e=e(),b(),e),N={class:"web-header"},M={class:"web-header-con"},S=C((()=>n("h1",null,"简书",-1))),I={class:"whcl"},_={class:"web-items"},T={class:"whcr"},K={class:"web-con-serch"},x={class:"wcs-con"},L={key:0,class:"serach-con-popover"},$={class:"scp-item"},H=C((()=>n("span",{class:"scp-label"},"文章",-1))),E={class:"scp-body scp-body1"},O=["onClick","innerHTML"],j={class:"scp-no"},Y={class:"scp-item"},A=C((()=>n("span",{class:"scp-label"},"作者",-1))),F={class:"scp-body"},P=["onClick"],R={class:"scp-auth-imgcon"},V=["src"],q=["innerHTML"],J={class:"scp-no"},Q={key:0,class:"avatar-con"},U=["src"],W={class:"popover-content"};var X=y(f,[["render",function(e,a,t,s,w,b){const D=c("popover");return l(),r("div",N,[n("div",M,[S,n("div",I,[n("div",_,[n("span",{class:o(["web-item",{"web-item-active":0==s.activeItem}]),onClick:a[0]||(a[0]=e=>s.getData(0))},"技术博客",2),n("span",{class:o(["web-item",{"web-item-active":1==s.activeItem}]),onClick:a[1]||(a[1]=e=>s.getData(1))},"科技",2),n("span",{class:o(["web-item",{"web-item-active":2==s.activeItem}]),onClick:a[2]||(a[2]=e=>s.getData(2))},"娱乐",2),n("span",{class:o(["web-item",{"web-item-active":3==s.activeItem}]),onClick:a[3]||(a[3]=e=>s.getData(3))},"体育",2),n("span",{class:o(["web-item",{"web-item-active":4==s.activeItem}]),onClick:a[4]||(a[4]=e=>s.getData(4))},"游戏",2),n("span",{class:o(["web-item",{"web-item-active":5==s.activeItem}]),onClick:a[5]||(a[5]=e=>s.getData(5))},"历史",2),n("span",{class:o(["web-item",{"web-item-active":6==s.activeItem}]),onClick:a[6]||(a[6]=e=>s.getData(6))},"美食",2),n("span",{class:o(["web-item",{"web-item-active":7==s.activeItem}]),onClick:a[7]||(a[7]=e=>s.getData(7))},"社会",2)])]),n("div",T,[n("div",K,[i(D,null,{content1:u((()=>[n("div",x,[h(n("input",{type:"text","onUpdate:modelValue":a[8]||(a[8]=e=>s.serachKey=e),placeholder:"搜索文章或者作者",onInput:a[9]||(a[9]=(...e)=>s.getSerachData&&s.getSerachData(...e)),onKeydown:a[10]||(a[10]=e=>s.handerKeyDown(e))},null,544),[[d,s.serachKey]]),n("i",{class:"el-icon-search",onClick:a[11]||(a[11]=(...e)=>s.toSerach&&s.toSerach(...e))})])])),content2:u((()=>[""!=s.serachKey?(l(),r("div",L,[n("div",$,[H,n("div",E,[(l(!0),r(p,null,m(s.serachData.article,(a=>(l(),r("div",{key:a._id,class:"scp-art",onClick:t=>e.$router.push("/article?id="+a._id),innerHTML:a.title},null,8,O)))),128)),h(n("div",j," 未搜索到相关文章 ",512),[[v,0==s.serachData.article.length]])])]),n("div",Y,[A,n("div",F,[(l(!0),r(p,null,m(s.serachData.authod,(a=>(l(),r("div",{key:a._id,class:"scp-auth",onClick:t=>e.$router.push("/authod?id="+a._id)},[n("div",R,[n("img",{src:a.avatar,alt:""},null,8,V)]),n("span",{class:"scp-name",innerHTML:a.username},null,8,q)],8,P)))),128)),h(n("div",J," 未搜索到相关作者 ",512),[[v,0==s.serachData.authod.length]])])])])):g("",!0)])),_:1})]),s.isLogin?(l(),r("div",Q,[i(D,null,{content1:u((()=>[n("img",{src:s.user.avatar,class:"avatar"},null,8,U)])),content2:u((()=>[n("div",W,[n("div",{onClick:a[12]||(a[12]=a=>e.$router.push("/authod?id="+s.user._id))}," 个人主页 "),n("div",{onClick:a[13]||(a[13]=a=>e.$router.push("/user/menu/manger/article"))}," 创作平台 "),n("div",{onClick:a[14]||(a[14]=(...e)=>s.signOut&&s.signOut(...e))},"退出登录")])])),_:1})])):g("",!0)])])])}],["__scopeId","data-v-70d44913"]]);function Z(){return{handlerTime1:e=>Date.now()-Number(e)<6e4?Math.floor((Date.now()-Number(e))/1e3)+"秒前":Date.now()-Number(e)<36e5?Math.floor((Date.now()-Number(e))/6e4)+"分钟前":Date.now()-Number(e)<864e5?Math.floor((Date.now()-Number(e))/36e5)+"小时前":Date.now()-Number(e)<2592e6?Math.floor((Date.now()-Number(e))/864e5)+"天前":Date.now()-Number(e)<31104e6?Math.floor((Date.now()-Number(e))/2592e6)+"月前":Math.floor((Date.now()-Number(e))/31104e6)+"年前",handlerTime2:e=>{let a=new Date(Number(e));new Date(Date.now).getFullYear(),a.getFullYear();let t=a.getMonth()+1;t<10&&(t="0"+t);let s=a.getDate();s<10&&(s="0"+s);let c=a.getHours();c<10&&(c="0"+c);let l=a.getMinutes();return l<10&&(l="0"+l),t+"-"+s+" "+c+":"+l}}}export{Z as h,X as w};
