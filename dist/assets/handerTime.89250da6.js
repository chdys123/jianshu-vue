import{o as e,V as a,X as t,a5 as s,Q as c,R as l,T as n,S as o,r,a4 as i,W as u,Y as d,a6 as p,a7 as v,Z as h,_ as m,a8 as g,a3 as b,a0 as w,a1 as D,$ as k}from"./vendor.c07be6c4.js";import{_ as y}from"./index.936426dd.js";const f={class:"popover-con"},C={class:"popover-content1"},N={class:"popover-content2"};const _={components:{popover:y({setup(){}},[["render",function(c,l,n,o,r,i){return e(),a("div",f,[t("div",C,[s(c.$slots,"content1",{},void 0,!0)]),t("div",N,[s(c.$slots,"content2",{},void 0,!0)])])}],["__scopeId","data-v-6eaf2ea4"]])},setup(){let{proxy:e}=k(),a=c(),t=l(),s=n("/"!=a.path?8:a.query.type);""!=a.fullPath&&"/"!=a.fullPath||(s.value=0);let r=!!localStorage.user,i=r?JSON.parse(localStorage.user):null,u=n(""),d=null,p=o({article:[],authod:[]});const v=(e,a)=>{let t=e.replace(/&lt;/g,"<");t=t.replace(/&gt;/g,">");let s=new RegExp("("+a+")","g");return t=t.replace(s,((e,a)=>"<span style='color:red;' class='textDeco'>"+a+"</span>")),t},h=()=>{u.value.trim()&&t.push("/serach?key="+u.value)};return{activeItem:s,getData:a=>{s.value=Number(a),e.$router.push("/?type="+a)},isLogin:r,user:i,serachKey:u,getSerachData:()=>{if(d&&clearTimeout(d),!u.value.trim())return p.article=[],void(p.authod=[]);d=setTimeout((()=>{e.http({method:"get",path:"/serach/artAndAuth",params:{key:u.value}}).then((e=>{e.article.forEach(((e,a,t)=>{t[a].title=v(e.title,u.value)})),e.authod.forEach(((e,a,t)=>{t[a].username=v(e.username,u.value)})),p.article=e.article,p.authod=e.authod}))}),1e3)},serachData:p,toSerach:h,changeString:v,handerKeyDown:e=>{"Enter"==e.code&&u.value.trim()&&h()},signOut:()=>{console.log("点击了退出登录"),localStorage.clear(),t.push("/login")}}},created(){}},I=e=>(w("data-v-07bad8d9"),e=e(),D(),e),M={class:"web-header"},S={class:"web-header-con"},T={class:"whcl"},$=I((()=>t("h1",null,"简书",-1))),K={class:"web-items"},L={class:"whcr"},x={class:"web-con-serch"},H={class:"wcs-con"},E={key:0,class:"serach-con-popover"},O={class:"scp-item"},P=I((()=>t("span",{class:"scp-label"},"文章",-1))),Y={class:"scp-body scp-body1"},j=["onClick","innerHTML"],A={class:"scp-no"},F={class:"scp-item"},R=I((()=>t("span",{class:"scp-label"},"作者",-1))),V={class:"scp-body"},q=["onClick"],B={class:"scp-auth-imgcon"},J=["src"],Q=["innerHTML"],U={class:"scp-no"},W={key:1,class:"avatar-con"},X=["src"],Z={class:"popover-content"},z=I((()=>t("div",null,"我的收藏",-1)));var G=y(_,[["render",function(s,c,l,n,o,w){const D=r("popover");return e(),a("div",M,[t("div",S,[t("div",T,[$,t("div",K,[t("span",{class:i(["web-item",{"web-item-active":0==n.activeItem}]),onClick:c[0]||(c[0]=e=>n.getData(0))},"技术博客",2),t("span",{class:i(["web-item",{"web-item-active":1==n.activeItem}]),onClick:c[1]||(c[1]=e=>n.getData(1))},"科技",2),t("span",{class:i(["web-item",{"web-item-active":2==n.activeItem}]),onClick:c[2]||(c[2]=e=>n.getData(2))},"娱乐",2),t("span",{class:i(["web-item",{"web-item-active":3==n.activeItem}]),onClick:c[3]||(c[3]=e=>n.getData(3))},"体育",2),t("span",{class:i(["web-item",{"web-item-active":4==n.activeItem}]),onClick:c[4]||(c[4]=e=>n.getData(4))},"游戏",2),t("span",{class:i(["web-item",{"web-item-active":5==n.activeItem}]),onClick:c[5]||(c[5]=e=>n.getData(5))},"历史",2),t("span",{class:i(["web-item",{"web-item-active":6==n.activeItem}]),onClick:c[6]||(c[6]=e=>n.getData(6))},"美食",2),t("span",{class:i(["web-item",{"web-item-active":7==n.activeItem}]),onClick:c[7]||(c[7]=e=>n.getData(7))},"社会",2)])]),t("div",L,[t("div",x,[u(D,null,{content1:d((()=>[t("div",H,[p(t("input",{type:"text","onUpdate:modelValue":c[8]||(c[8]=e=>n.serachKey=e),placeholder:"搜索文章或者作者",onInput:c[9]||(c[9]=(...e)=>n.getSerachData&&n.getSerachData(...e)),onKeydown:c[10]||(c[10]=e=>n.handerKeyDown(e))},null,544),[[v,n.serachKey]]),t("i",{class:"el-icon-search",onClick:c[11]||(c[11]=(...e)=>n.toSerach&&n.toSerach(...e))})])])),content2:d((()=>[""!=n.serachKey?(e(),a("div",E,[t("div",O,[P,t("div",Y,[(e(!0),a(h,null,m(n.serachData.article,(t=>(e(),a("div",{key:t._id,class:"scp-art",onClick:e=>s.$router.push("/article?id="+t._id),innerHTML:t.title},null,8,j)))),128)),p(t("div",A," 未搜索到相关文章 ",512),[[g,0==n.serachData.article.length]])])]),t("div",F,[R,t("div",V,[(e(!0),a(h,null,m(n.serachData.authod,(c=>(e(),a("div",{key:c._id,class:"scp-auth",onClick:e=>s.$router.push("/authod?id="+c._id)},[t("div",B,[t("img",{src:c.avatar,alt:""},null,8,J)]),t("span",{class:"scp-name",innerHTML:c.username},null,8,Q)],8,q)))),128)),p(t("div",U," 未搜索到相关作者 ",512),[[g,0==n.serachData.authod.length]])])])])):b("",!0)])),_:1})]),n.isLogin?b("",!0):(e(),a("button",{key:0,class:"logonBtn",onClick:c[12]||(c[12]=e=>s.$router.push("/login"))}," 登录 ")),n.isLogin?(e(),a("div",W,[u(D,null,{content1:d((()=>[t("img",{src:n.user.avatar,class:"avatar"},null,8,X)])),content2:d((()=>[t("div",Z,[t("div",{onClick:c[13]||(c[13]=e=>s.$router.push("/authod?id="+n.user._id))}," 个人主页 "),t("div",{onClick:c[14]||(c[14]=e=>s.$router.push("/user/menu/mainPage"))},"创作平台"),z,t("div",{onClick:c[15]||(c[15]=(...e)=>n.signOut&&n.signOut(...e))},"退出登录")])])),_:1})])):b("",!0)])])])}],["__scopeId","data-v-07bad8d9"]]);function ee(){return{handlerTime1:e=>Date.now()-Number(e)<6e4?Math.floor((Date.now()-Number(e))/1e3)+"秒前":Date.now()-Number(e)<36e5?Math.floor((Date.now()-Number(e))/6e4)+"分钟前":Date.now()-Number(e)<864e5?Math.floor((Date.now()-Number(e))/36e5)+"小时前":Date.now()-Number(e)<2592e6?Math.floor((Date.now()-Number(e))/864e5)+"天前":Date.now()-Number(e)<31104e6?Math.floor((Date.now()-Number(e))/2592e6)+"月前":Math.floor((Date.now()-Number(e))/31104e6)+"年前",handlerTime2:e=>{let a=new Date(Number(e));new Date(Date.now).getFullYear(),a.getFullYear();let t=a.getMonth()+1;t<10&&(t="0"+t);let s=a.getDate();s<10&&(s="0"+s);let c=a.getHours();c<10&&(c="0"+c);let l=a.getMinutes();return l<10&&(l="0"+l),t+"-"+s+" "+c+":"+l}}}export{ee as h,G as w};
