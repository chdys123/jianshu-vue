import{_ as e}from"./index.936426dd.js";import{S as s,T as a,r as l,V as r,W as o,Y as t,o as d,X as u,a3 as n,$ as c,aa as m}from"./vendor.c07be6c4.js";const p={setup(){const{proxy:e}=c();let l=s({username:"",pwd:""});let r=a(!1);return{user:l,login:function(){e.http({method:"post",path:"/login",params:l}).then((s=>{console.log(s),200==s.code?(e.$message.success("登录成功"),localStorage.setItem("token",s.token),localStorage.setItem("user",JSON.stringify(s.user)),e.$store.commit("updateUser",s.user),e.$router.push("/")):300==s.code?e.$message.error("用户名或密码错误"):e.$message.error("服务器出现异常，请稍后再试")}))},reg:function(){r.value?e.http({method:"post",path:"/reg",params:{username:l.username,pwd:l.pwd}}).then((s=>{200==s.code?(e.$message.success("注册成功"),r.value=!1):400==s.code?e.$message.error("用户名已经存在"):300==s.code?e.$message.error("注册失败"):e.$message.error("服务器出现异常")})):(r.value=!0,l.username=null,l.pwd=null)},isReg:r}}},i={class:"login-con"},g={class:"card-header"},f={key:0},h={key:1},$=m("登录"),_=m("注册");var k=e(p,[["render",function(e,s,a,c,m,p){const k=l("el-input"),v=l("el-form-item"),w=l("el-button"),b=l("el-form"),V=l("el-card");return d(),r("div",i,[o(V,{class:"box-card"},{header:t((()=>[u("div",g,[c.isReg?n("",!0):(d(),r("span",f,"登录")),c.isReg?(d(),r("span",h,"注册")):n("",!0)])])),default:t((()=>[o(b,{model:c.user},{default:t((()=>[o(v,null,{default:t((()=>[o(k,{modelValue:c.user.username,"onUpdate:modelValue":s[0]||(s[0]=e=>c.user.username=e),placeholder:"请输入用户名"},null,8,["modelValue"])])),_:1}),o(v,null,{default:t((()=>[o(k,{modelValue:c.user.pwd,"onUpdate:modelValue":s[1]||(s[1]=e=>c.user.pwd=e),placeholder:"请输入密码","show-password":""},null,8,["modelValue"])])),_:1}),o(v,null,{default:t((()=>[o(w,{type:"primary",class:"login-btn",onClick:c.login,disabled:c.isReg},{default:t((()=>[$])),_:1},8,["onClick","disabled"]),o(w,{class:"regist-btn",onClick:c.reg},{default:t((()=>[_])),_:1},8,["onClick"])])),_:1})])),_:1},8,["model"])])),_:1})])}],["__scopeId","data-v-0090d012"]]);export{k as default};
